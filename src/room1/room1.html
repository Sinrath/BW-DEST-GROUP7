<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>VR Escape Room - Room 1</title>
    <meta name="description" content="VR Escape Room Room 1 - A-Frame">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>

    <!-- A-Frame Extras (movement controls and collision) -->
    <script src="../../aframe-extras/dist/aframe-extras.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@1.0.0/dist/aframe-look-at-component.min.js"></script>

    <script src="../shared/movement.js"></script>
    <script src="room1.js"></script>

</head>
<body>
<a-scene background="color: #f0f0f0"
         vr-mode-ui="enabled: true">

    <!-- Assets -->
    <a-assets>
        <a-asset-item id="woodModel" src="../../models/wood.glb"></a-asset-item>
        <a-asset-item id="concreteModel" src="../../models/concrete_material.glb"></a-asset-item>
        <a-asset-item id="scannerModel" src="../../models/sci-fi_scanner.glb"></a-asset-item>
    </a-assets>

    <!-- Lighting -->
    <a-light type="ambient" color="#ffffff" intensity="0.9"></a-light>
    <a-light type="directional" position="2 4 2" color="#ffffff" intensity="1.3"></a-light>
    <a-light type="point" position="0 3 0" color="#ffffff" intensity="1.5" distance="20"></a-light>
    <a-light type="point" position="5 2 5" color="#ffffff" intensity="0.8" distance="15"></a-light>
    <a-light type="point" position="-5 2 -5" color="#ffffff" intensity="0.8" distance="15"></a-light>
    <!-- Room 2 Structure (16x16) -->
    <a-box position="0 -0.05 0" width="16" height="0.1" depth="16"
           material="color: #e0e0e0; roughness: 0.3"></a-box>
    <a-box position="0 3.05 0" width="16" height="0.1" depth="16"
           material="color: #f5f5f5; roughness: 0.2"></a-box>

    <!-- Room 2 Walls -->
    <a-box position="0 1.5 -8" width="16" height="3" depth="0.3"
           material="color: #d0d0d0; roughness: 0.4"></a-box>
    <a-box position="-6 1.5 8" width="4" height="3" depth="0.3"
           material="color: #d0d0d0; roughness: 0.4"></a-box>
    <a-box position="6 1.5 8" width="4" height="3" depth="0.3"
           material="color: #d0d0d0; roughness: 0.4"></a-box>
    <a-box position="-8 1.5 0" width="0.3" height="3" depth="16"
           material="color: #d0d0d0; roughness: 0.4"></a-box>
    <a-box position="8 1.5 0" width="0.3" height="3" depth="16"
           material="color: #d0d0d0; roughness: 0.4"></a-box>

    <!-- Door back to Entrance -->
    <a-box id="door-entrance" position="-2 1.5 8" width="1.5" height="2.5" depth="0.3"
           material="color: #4A4A4A; roughness: 0.3"
           class="door" data-target="../entrance.html"></a-box>

    <a-text position="-2 2.8 7.8" rotation="0 180 0"
            value="← ENTRANCE" align="center"
            color="red" scale="0.8 0.8 0.8"></a-text>

    <a-text position="-2 2.3 7.8" rotation="0 180 0"
            value="(Back)" align="center"
            color="white" scale="0.4 0.4 0.4"></a-text>

    <!-- Door to Room 2 -->
    <a-box id="door-room2" position="2 1.5 8" width="1.5" height="2.5" depth="0.3"
           material="color: #4A4A4A; roughness: 0.3"
           class="door" data-target="../room2/room2.html"></a-box>

    <a-text position="2 2.8 7.8" rotation="0 180 0"
            value="ROOM 2 →" align="center"
            color="red" scale="0.8 0.8 0.8"></a-text>

    <a-text position="2 2.3 7.8" rotation="0 180 0"
            value="(Next)" align="center"
            color="white" scale="0.4 0.4 0.4"></a-text>


    <!-- Material Samples in center of room -->
    <a-gltf-model id="wood-sample" src="#woodModel"
                  position="-1.5 0.2 0"
                  scale="0.08 0.08 0.08"
                  rotation="0 0 0"
                  class="material scannable"
                  data-material="wood"
                  data-info="Wood Sample: Organic material, density 0.6 g/cm³, flammable"></a-gltf-model>

    <a-gltf-model id="concrete-sample" src="#concreteModel"
                  position="1.5 0.5 0"
                  scale="0.4 0.4 0.4"
                  rotation="0 0 0"
                  class="material scannable"
                  data-material="concrete"
                  data-info="Concrete Sample: Composite material, density 2.4 g/cm³, fire resistant"></a-gltf-model>

    <!-- Scanner on ground -->
    <a-gltf-model id="scanner" src="#scannerModel"
                  position="0 1 -2"
                  scale="0.1 0.1 0.1"
                  rotation="0 0 0"
                  class="pickupable scanner"
                  data-item="scanner"></a-gltf-model>

    <!-- Room Title -->
    <a-text position="0 2.5 -7" value="ROOM 1" align="center"
            color="black" scale="1.2 1.2 1.2"></a-text>


        <a-entity id="leftHand"
                  hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc"></a-entity>
        <a-entity id="rightHand"
                  hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc"></a-entity>
    </a-entity>

    <a-entity id="rig"
              position="0 1.6 5"
              movement-controls="controls: keyboard, touch"
              simple-collision>
        <a-entity id="playerCam" camera look-controls>
            <a-cursor position="0 0 -1"
                      geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                      material="color: white; shader: flat"
                      raycaster="objects: .door, .pickupable, .scannable; showLine: true; recursive: true"></a-cursor>
        </a-entity>

    <!-- UI Text -->
    <a-text id="message" position="0 2.8 2"
            value="Find the scanner and analyze the materials"
            align="center" color="black" scale="0.5 0.5 0.5" look-at="#playerCam"></a-text>

    <!-- Scan Info Tooltip (bottom right, screen-fixed) -->
    <a-entity id="scan-tooltip" position="0 0 0" visible="false">
        <a-plane position="1.5 -0.8 -1.5" width="1.8" height="0.7"
                 material="color: #000000; opacity: 0.8"
                 look-at="#playerCam"></a-plane>
        <a-text id="scan-info" position="1.5 -0.8 -1.4"
                value=""
                align="center" color="#00FF00" scale="0.3 0.3 0.3"
                look-at="#playerCam"></a-text>
    </a-entity>
</a-scene>
</body>
</html>
